#derive motion detected / not detected from simple sensor triggers - first sensor
  - alias: motion detected set
    initial_state: 'on'
    trigger:
     platform: state
     entity_id: binary_sensor.motion_sensor_158d0001fa3d9c
     to: 'on'
    action:
      - service: input_boolean.turn_on
        entity_id: input_boolean.motion_detected

  - alias: motion detected reset
    initial_state: 'on'
    trigger:
      platform: state
      entity_id: input_boolean.motion_detected
      to: 'on'
    action:
      - service: input_boolean.turn_off
        entity_id: input_boolean.motion_detected

#derive motion detected / not detected from simple sensor triggers - second sensor
  - alias: motion detected set
    initial_state: 'on'
    trigger:
     platform: state
     entity_id: binary_sensor.motion_sensor_158d000200ceec
     to: 'on'
    action:
      - service: input_boolean.turn_on
        entity_id: input_boolean.motion_detected

  - alias: motion detected reset
    initial_state: 'on'
    trigger:
      platform: state
      entity_id: input_boolean.motion_detected
      to: 'on'
    action:
      - service: input_boolean.turn_off
        entity_id: input_boolean.motion_detected
        


# control something
  - alias: motion based action on
    initial_state: 'on'
    trigger:
      platform: state
      entity_id: input_boolean.motion_detected
      to: 'on'
    condition:
      condition: or
      conditions:
        - condition: template
          value_template: '{{ states.sensor.illumination_158d0001fa3d9c.state | int <= states.input_number.illuminance_threshold.state | int }}'
        - condition: template
          value_template: '{{ states.sensor.illumination_158d000200ceec.state | int <= states.input_number.illuminance_threshold.state | int }}'
    action:
      - service: input_boolean.turn_on
        entity_id: input_boolean.motion_based_action
        
  - alias: motion based action off
    initial_state: 'on'
    trigger:
      platform: state
      entity_id: input_boolean.motion_detected
      to: 'off'
      for:
        seconds: 90
    action:
      - service: input_boolean.turn_off
        entity_id: input_boolean.motion_based_action